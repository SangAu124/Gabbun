# 01. docs/01_product_scope.md

## Core Objective

사용자가 지정한 기상 시각을 지키면서도, 그 이전의 제한된 시간 창(스마트 알람 윈도우) 내에서 **“각성(깨어남)에 가까운 생체 신호 패턴”**을 탐지해 최소 불쾌감(수면 관성)으로 기상하도록 유도한다.

---

## 정량 목표 (KPI)

1. **윈도우 내 스마트 기상 성공률**
   - 목표 시각보다 빨리, 사용자 각성 반응 동반하여 알람이 울린 비율
2. **기상 후 주관 만족도** (개운함 점수) 및 **재수면(스누즈 반복) 감소**
3. **워치 배터리 소모 상한 유지** (밤 1회 실행 기준)

---

## 핵심 기능: Smart Wake Window Alarm (스마트 기상 윈도우 알람)

### 1. 기능 정의 (사용자 관점)
* 사용자가 **목표 기상 시각**과 **스마트 윈도우**(예: 30분)를 설정한다.
* 워치는 윈도우 동안 심박/움직임 기반으로 **“깨우기 좋은 순간”**을 탐지한다.
* 조건을 만족하면 즉시 워치에서 **햅틱+사운드 알람**을 울린다.
* 윈도우 내 적합 순간이 없으면 **목표 기상 시각에 강제 알람**을 울린다.

### 2. 한 줄 요약
**“스마트 기상 윈도우 동안 워치가 모션+심박 기반 wakeability 점수를 계산하고, 점수가 임계값을 넘는 순간에만 알람을 울려 수면 관성을 줄이는 기능”**
기술적으로는 **워치 단독 추론 + 아이폰 개인화**가 가장 효율적입니다.

---

## 사용자 플로우

1. **iOS 앱**: 기상 시각, 윈도우 크기, 민감도 설정 → Watch 동기화
2. **Watch 앱**: 
   - 취침 모드/대기
   - 윈도우 진입 시 모니터링 시작 (센서 활성화)
   - Wakeability 점수 계산 및 트리거 판단
   - 알람 발화 (Smart or Forced)
3. **결과 확인**: 
   - 알람 종료 후 요약 리포트 생성 및 iOS 전송
   - iOS에서 '언제 울렸는지', '근거 점수' 확인

---

## MVP 제외 (Non-Goals)
* 수면 단계(REM/Deep)의 정확한 의학적 판별 (Wakeability 추정에 집중)
* 복잡한 서버 연동/계정 시스템

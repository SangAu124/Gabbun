# Gabbun 구현 현황 점검 & 고도화 제안 (2026-02-26)

## 1) README 대비 구현 상태 요약

### 이미 구현된 항목
- iOS 알람 설정(기상시각/윈도우/민감도/활성화)
- iOS → Watch 스케줄 동기화 (`updateSchedule`)
- Watch 실시간 모니터링(모션/심박)
- Wakeability 점수 계산 + Smart/Forced 트리거
- Watch 알람(울림/스누즈/종료)
- 세션 요약 생성 및 iOS 리포트 저장/표시
- iOS 폴백 로컬 알림(워치 실패 대비)

### 갭/리스크
1. **설정 영속성 부재(해결됨)**
   - 앱 재실행 시 사용자 설정(시간/윈도우/민감도)이 초기화될 수 있음.
2. WCSession 연결 불안정 시 재시도 전략 약함
   - 동기화 실패 시 즉시 실패 처리, 백오프/재시도 없음.
3. 모니터링 품질 메타데이터 부족
   - 센서 샘플 수/결측률/신뢰도 지표가 리포트에 없음.

---

## 2) 이번 반영 사항 (실제 구현 완료)

### ✅ Setup 설정 영속화 추가
- 신규 파일: `Projects/App/iOS/Sources/SetupStoreClient.swift`
- 저장 모델: `SetupSettings`
- 저장 위치: `Application Support/setup_settings.json`

### ✅ SetupFeature에 로드/저장 플로우 통합
- `onAppear` 시 저장된 설정 로드
- 사용자가 시간/윈도우/민감도/활성화 변경 시 즉시 저장
- 저장/로드 실패 시 사용자 에러 메시지 반영

---

## 3) 다음 고도화 우선순위 (추천)

1. **동기화 재시도(최우선)**
   - `syncButtonTapped` 실패 시 2~3회 지수 백오프 재시도
2. **리포트 품질지표 추가**
   - 세션별 샘플 수, 모션/심박 유효비율, 추정 신뢰도
3. **사용자 경험 개선**
   - 마지막 동기화 성공 스케줄과 현재 편집값 diff 표시

---

## 4) 구현 의도
이번 변경은 MVP 완성도를 높이는 데서 **실사용 치명도 높은 문제(설정 유실)**를 먼저 제거하는 데 집중했습니다.
